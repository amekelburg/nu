.navbar-collapse.collapse#top-menu
  %ul.nav.navbar-nav.navbar-right
    - unless @error_wrapping
      - unless front_page?
        -# Profile menu
        %li.dropdown
          = link_to "#", class: 'btn-lg dropdown-toggle', data: { toggle: 'dropdown' }, role: 'button' do
            = icon_tag "person"
          %ul.dropdown-menu
            - if logged_in?
              %li.dropdown-header.user-name
                %strong= current_user_name
              %li.divider{ role: "separator" }
              %li= link_to t(".profile"), my_profile_path
              %li= link_to t(".logout"), :logout
            - else
              %li= link_to t(".login"), :root

      - if logged_in? && !public_page?
        -# Notifications menu
        %li.notifications.dropdown
          = link_to "#", class: 'btn-lg dropdown-toggle', data: { toggle: 'dropdown' }, role: 'button' do
            - unread = (@notifications || []).count { |n| !n.read? }
            - if unread > 0
              %span.badge= unread
            = icon_tag "notifications"
          %ul.dropdown-menu
            %li= link_to t("submenu.new_notifications"), new_only_notifications_path
            %li= link_to t("submenu.all_notifications"), notifications_path

      -# Info menu
      %li.dropdown
        = link_to "#", class: 'btn-lg dropdown-toggle', data: { toggle: 'dropdown' }, role: 'button' do
          = icon_tag "info"
        %ul.dropdown-menu
          - if logged_in?
            %li= link_to t("layouts.header.documentation.label"), t("layouts.header.documentation.url")
            %li= link_to t("layouts.header.tech_support.label"), t("layouts.header.tech_support.url")
            %li= link_to t("layouts.header.ops_notices.label"), t("layouts.header.ops_notices.url")
          - else
            - 3.times do |i|
              %li= link_to t("layouts.header.public_link_#{i+1}.label"), t("layouts.header.public_link_#{i+1}.url")

      - if logged_in? && !public_page?
        -# Activity menu
        %li.dropdown
          = link_to "#", class: 'btn-lg dropdown-toggle', data: { toggle: 'dropdown' }, role: 'button' do
            = icon_tag "visibility"
          %ul.dropdown-menu
            %li= link_to t(".recent_activity"), :recent_activity
